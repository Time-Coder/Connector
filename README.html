<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">

<style type="text/css">
.stick, .stick-hover, .stick-clicked
{
    background-image: url("G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/icons/stick.png");
}
</style>

<!-- icon -->
<link rel="Shortcut Icon" href="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/icons/note_book.png" type="image/x-icon" />

<!-- code style -->
<link rel="stylesheet" href="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/highlight/atom-one-light.css">

<!-- layout style -->
<link rel="stylesheet" href="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/outer.css">

<!-- elements style -->
<link rel="stylesheet" href="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/inner.css">

<!-- code highlight -->
<script src="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/highlight/highlight.pack.js"></script>
<script>hljs.highlightAll();</script>
<script src="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/jquery.min.js"></script>

<script type="text/javascript" src="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/intereactive.js"></script>
<!-- <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js'></script> -->
<script type='text/javascript' src='G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/MathJax-2.7.1/MathJax.js'></script>
<script src="G:/cpp-workspace/FirstParty/other_resource/md2html/plugins_offline/MathJax_config.js"></script>

<title>Connector -- A lightweight network programming tool for Python</title>
</head>
<body>
<div id="all">
<div id="content-index"><ul class="index">
<li><div class="item-arrow"></div><a href="#section-0-1">0.1&nbsp;&nbsp;What can Connector do?</a></li>
<li><div class="item-arrow"></div><a href="#section-0-2">0.2&nbsp;&nbsp;Get connected</a></li>
<li><div class="item-arrow"></div><a href="#section-0-3">0.3&nbsp;&nbsp;Share/Send variables</a>
<ul class="index">
<li><div class="item-arrow"></div><a href="#section-0-3-1">0.3.1&nbsp;&nbsp;via local shared dict</a></li>
<li><div class="item-arrow"></div><a href="#section-0-3-2">0.3.2&nbsp;&nbsp;via global shared dict</a></li>
<li><div class="item-arrow"></div><a href="#section-0-3-3">0.3.3&nbsp;&nbsp;via local pipes</a></li>
<li><div class="item-arrow"></div><a href="#section-0-3-4">0.3.4&nbsp;&nbsp;via local queues</a></li>
<li><div class="item-arrow"></div><a href="#section-0-3-5">0.3.5&nbsp;&nbsp;via global queues</a></li>
</ul>
</li>
<li><div class="item-arrow"></div><a href="#section-0-4">0.4&nbsp;&nbsp;Get/Put files/folders</a></li>
<li><div class="item-arrow"></div><a href="#section-0-5">0.5&nbsp;&nbsp;RPC (Remote Procedure Call)</a></li>
<li><div class="item-arrow"></div><a href="#section-0-6">0.6&nbsp;&nbsp;Examples</a>
<ul class="index">
<li><div class="item-arrow"></div><a href="#section-0-6-1">0.6.1&nbsp;&nbsp;Chat room</a></li>
<li><div class="item-arrow"></div><a href="#section-0-6-2">0.6.2&nbsp;&nbsp;Time consuming integral</a></li>
</ul>
</li>
</ul>
    <!-- index navigation -->
</div>
<div id="content-container">
<div id="content">
<article class="markdown-body"><h1 id="title">Connector -- A lightweight network programming tool for Python</h1>
<h2 id="section-0-1" class="h-title" >0.1&nbsp;&nbsp&nbsp;What can Connector do?</h2>
<p><strong>Connector</strong> will greatly simplify Client/Server mode's network programming. <strong>Connector</strong> can help a lot in any situations that need message exchanging. All message communication will become very easy. In detail, it can do following things: </p>
<ol>
<li>Share/Send variables between different threads/processes/programs/computers.</li>
<li>Put/Get files/folders to/from different programs on different computers.</li>
<li>RPC (Remote Procedure Call)</li>
</ol>
<p>Before everything, let's see some exciting examples.</p>
<h2 id="section-0-2" class="h-title" >0.2&nbsp;&nbsp&nbsp;Get connected</h2>
<p><strong>Connector</strong> works in Client/Server mode. So if you want to communicate between some computers, you should choose one computers work as a server, other computers work as a clients and should connect with server. So you should use following steps to get all computers connected:</p>
<ol>
<li>You have some computers connected in the one Local Area Network.</li>
<li>Choose one computer works as server. Other computers work as clients.</li>
<li>On server computer, run code <code>server = Server(ip, port_number)</code>. If <code>port_number</code> gives nothing, it will use a random avaiable port. If both <code>ip</code> and <code>port_number</code> give nothing, it will use first avaiable network interface card's ip.</li>
<li>On server computer, you can use <code>print(server.address)</code> to get address of server. Such that it print <code>('192.168.199.210', 57680)</code>. Note it on your notebook.</li>
<li>On each client computer, run following code to connect with server:
<div class="highlight"><pre><span></span><code><span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s1">&#39;192.168.199.210&#39;</span><span class="p">,</span> <span class="mi">57680</span><span class="p">)</span> <span class="c1"># use the address you note on notebook</span>
</code></pre></div></li>
<li>On server computer, you can get each <strong><em>client peer</em></strong> by this way:
<div class="highlight"><pre><span></span><code><span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># to get first connected client</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[(</span><span class="s1">&#39;192.168.105.23&#39;</span><span class="p">,</span> <span class="mi">8273</span><span class="p">)]</span> <span class="c1"># to get client whose address is (&#39;192.168.105.23&#39;, 8273)</span>
</code></pre></div>
<strong><em>client peer</em></strong> means a communication handle on server side that connected with one client.</li>
</ol>
<p>After that, you got <code>server</code> object on server computer and <code>client</code> object on each client computer. Let's have a group chat of these computers!</p>
<h2 id="section-0-3" class="h-title" >0.3&nbsp;&nbsp&nbsp;Share/Send variables</h2>
<h3 id="section-0-3-1" class="h-title" >0.3.1&nbsp;&nbsp&nbsp;via local shared dict</h3>
<p>A client and server use shared variables, just use <strong>local shared dict</strong>. On client side, use <code>client</code> just like a normal dict. On server side, use <strong><em>client peer</em></strong> just like a normal dict. And logically, client side dict and server side dict are one same dict and will always synchronize changes. For example, 
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="n">client</span><span class="p">[</span><span class="s2">&quot;var1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">256</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="nb">print</span><span class="p">(</span><span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;var1&quot;</span><span class="p">])</span> <span class="c1"># you got 256</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;var1&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Hello world!&quot;</span>
</code></pre></div>
<p><div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="p">[</span><span class="s2">&quot;var1&quot;</span><span class="p">])</span> <span class="c1"># you got &quot;Hello world!&quot;</span>
</code></pre></div>
In this example, You can use <code>client</code> and <code>server.clients[0]</code> just like normal dict. It support all normal dict operations.</p>
<h3 id="section-0-3-2" class="h-title" >0.3.2&nbsp;&nbsp&nbsp;via global shared dict</h3>
<p>If a client want to share variables with other clients, just use <strong>global shared dict</strong>. On all client sides, use <code>client.globals</code> just like a normal dict. On server side, use <code>server</code> just like a normal dict. And logically, <code>client.globals</code> on each client computer and <code>server</code> are one dict and will always synchronize changes. For example,
<div class="highlight"><pre><span></span><code><span class="c1"># client computer 1</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="p">[</span><span class="s2">&quot;test_var&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;well&quot;</span><span class="p">]</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># client computer 2</span>
<span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="p">[</span><span class="s2">&quot;test_var&quot;</span><span class="p">])</span> <span class="c1"># you got [0, &quot;well&quot;]</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Can somebody bring me some milk?&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># server computer</span>
<span class="nb">print</span><span class="p">(</span><span class="n">server</span><span class="p">[</span><span class="s2">&quot;test_var&quot;</span><span class="p">])</span> <span class="c1"># you got [0, &quot;well&quot;]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">server</span><span class="p">[</span><span class="s2">&quot;message&quot;</span><span class="p">])</span> <span class="c1"># you got &quot;Can somebody bring me some milk?&quot;</span>
</code></pre></div>
<h3 id="section-0-3-3" class="h-title" >0.3.3&nbsp;&nbsp&nbsp;via local pipes</h3>
<p>If you want one client and server just has a conversation, you can use local pipes. On client side, use <code>client</code> just like a normal pipe side. On server side, use <strong><em>client peer</em></strong> just like this pipe's another side. For example,
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;What&#39;s you name?&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span> <span class="c1"># program will hold on until server side send something.</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span> <span class="c1"># you got &quot;What&#39;s you name?&quot;</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;My name is Bruce.&quot;</span><span class="p">)</span>
<span class="c1"># client side&#39;s client.recv() statement will get result &quot;My name is Bruce.&quot;</span>
</code></pre></div>
<p>If you want to use a lot of pipes in some purpose, you can use <code>pipes</code> property in <code>client</code> object and <strong><em>client peer</em></strong> on server side. See following code:
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="n">client</span><span class="o">.</span><span class="n">pipes</span><span class="p">[</span><span class="s2">&quot;any_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s2">&quot;How old are you?&quot;</span><span class="p">)</span>
<span class="n">client</span><span class="o">.</span><span class="n">pipes</span><span class="p">[</span><span class="s2">&quot;any_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span> <span class="c1"># program will hold on until server side send something.</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pipes</span><span class="p">[</span><span class="s2">&quot;any_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span> <span class="c1"># you got &quot;How old are you?&quot;</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">pipes</span><span class="p">[</span><span class="s2">&quot;any_name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="c1"># client side&#39;s client.pipes[&quot;any_name&quot;].recv() statement will get result 25</span>
</code></pre></div>
<h3 id="section-0-3-4" class="h-title" >0.3.4&nbsp;&nbsp&nbsp;via local queues</h3>
<p>Client and server can also communicate via queues. In this way:
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="n">client</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Send me a file: test.jpg&quot;</span><span class="p">)</span>
<span class="c1"># client.get() # don&#39;t call get() here, otherwise it will get the message it put itself.</span>
<span class="n">client</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;other_queue&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;Call me in 5 minutes.&quot;</span><span class="p">)</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got &quot;Send me a file: test.jpg&quot;</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;No such file!&quot;</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;other_queue&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got &quot;Call me in 5 minutes.&quot;</span>
<span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;other_queue&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="s2">&quot;OK&quot;</span><span class="p">)</span>
</code></pre></div>
<h3 id="section-0-3-5" class="h-title" >0.3.5&nbsp;&nbsp&nbsp;via global queues</h3>
<p>Anybody can <code>get</code> and <code>put</code> variables in a global shared place: <strong>global queues</strong>. For example:
<div class="highlight"><pre><span></span><code><span class="c1"># client computer 1</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">put</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;request&quot;</span><span class="p">})</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;news&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">({</span><span class="s2">&quot;title&quot;</span><span class="p">:</span> <span class="s2">&quot;Super man died&quot;</span><span class="p">,</span> <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="s2">&quot;...&quot;</span><span class="p">})</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># client computer 2</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got {&quot;type&quot;: &quot;request&quot;} that client 1 put</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">put</span><span class="p">({</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;respond&quot;</span><span class="p">})</span>
<span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;news&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># server computer</span>
<span class="n">server</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got {&quot;type&quot;: &quot;respond&quot;} that client 2 put</span>
<span class="n">server</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;news&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got {&quot;title&quot;: &quot;Super man died&quot;, &quot;body&quot;: &quot;...&quot;} that client 1 put</span>
<span class="n">server</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;news&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span> <span class="c1"># you got [0, 1, 2] that client 2 put</span>
</code></pre></div>
<h2 id="section-0-4" class="h-title" >0.4&nbsp;&nbsp&nbsp;Get/Put files/folders</h2>
<p><strong>Connector</strong> can do file exchange in a very easy way. But can only exchange files between server and client. Client and client cannot exchange file directly, but they can do it through server. You can use following functions to get/put files/folders between client and server(where <code>client</code> on client side means <code>client</code> object and on server side means <strong><em>client peer</em></strong>).</p>
<ul>
<li><code>client.get_file(src_file_path, dest_file_path = None, block = True)</code>: Get file from remote computer.<ul>
<li><code>src_file_path</code>: Remote file path you need to get from remote computer.</li>
<li><code>dest_file_path</code>: Local file path you need to put the file at. If it's <code>None</code>, it will put file at current working directory.</li>
<li><code>block</code>: If it's <code>True</code>, it will block the process until file transfer finished. Otherwise this method will immediately return a <code>Future</code> object which you can call <code>done</code> method on it to check if transfer is finished. To see more usage of a <code>Future</code> object, please refer to section <strong>User Functions Reference</strong></li>
</ul>
</li>
<li><code>client.put_file(src_file_path, dest_file_path = None, block = True)</code>: Put local file to remote computer.<ul>
<li><code>src_file_path</code>: Local file path you need to put to remote computer.</li>
<li><code>dest_file_path</code>: Remote computer file path which you need to put file at. If it's <code>None</code>, it will put file at remote script working directory.</li>
<li><code>block</code>: If it's <code>True</code>, it will block the process until file transfer finished. Otherwise this method will immediately return a <code>Future</code> object which you can call <code>done</code> method on it to check if transfer is finished. To see more usage of a <code>Future</code> object, please refer to section <strong>User Functions Reference</strong></li>
</ul>
</li>
<li><code>client.get_folder(src_folder_path, dest_folder_path = None, block = True)</code>: Get folder from remote computer. The usage is just like <code>get_file</code>.</li>
<li><code>client.put_folder(src_folder_path, dest_folder_path = None, block = True)</code>: Put local folder to remote computer. The usage is just like <code>put_file</code>.</li>
<li><code>server.put_file_to_all(src_file_path, dest_file_path)</code>: Put server computer's file <code>src_file_path</code> to all connected clients as path <code>dest_file_path</code>.</li>
<li><code>server.put_folder_to_all(src_folder_path, dest_folder_path)</code>: Put server computer's folder <code>src_folder_path</code> to all connected clients as path <code>dest_folder_path</code>.</li>
</ul>
<h2 id="section-0-5" class="h-title" >0.5&nbsp;&nbsp&nbsp;RPC (Remote Procedure Call)</h2>
<p><strong>Connector</strong> can do RPC in a easy way. It can call functions, call system commands and run scripts on remote computer. In following description, <code>client</code> means <code>client</code> object on client side, means <strong><em>client peer</em></strong> on server side.</p>
<ul>
<li><code>client.eval(statement, block = True)</code>: Let remote computer call python <code>eval</code> and get return value.<ul>
<li><code>statement</code>: The string of Python code.</li>
<li><code>block</code>: If <code>block</code> is <code>True</code>, it will block process until remote <code>eval</code> returns. Otherwise it will immediately return a <code>Future</code> object which you can call <code>result()</code> on it to get real return value.</li>
</ul>
</li>
<li><code>client.exec(code, block = True)</code>: Let remote computer call python <code>exec</code> and get return value. Usage just like <code>client.eval</code>.</li>
<li><code>client.execfile(local_script_path, block=True)</code>: Let remote computer run a local python script.<ul>
<li><code>local_script_path</code>: Script file path on local computer.</li>
<li><code>block</code>: If <code>block</code> is <code>True</code>, it will block process until remote computer run script finished. Otherwise, it will immediately return a <code>Future</code> object which you can call <code>result()</code> on to wait it finished.</li>
</ul>
</li>
<li><code>client.exec_remote_file(remote_script_path, block=True)</code>: Let remote computer run a remote python script. The usage is just like <code>client.run</code>.</li>
<li><code>client.system(cmd, quiet=False, remote_quiet=False, once_all=False, block=True)</code>: Let remote computer run system command.<ul>
<li><code>cmd</code>: System command string need to be call.</li>
<li><code>quiet</code>: If <code>quiet</code> is <code>True</code>, local side won't print anything of standard output and standard error.</li>
<li><code>remote_quiet</code>: If it's <code>True</code>, remote side won't print anything of standard output and standard error.</li>
<li><code>once_all</code>: Local and remote side won't print anything during system call processing and will print message after system finished.</li>
<li><code>block</code>: If <code>block</code> is <code>True</code>, it will block process until system call finished and return system call's return value. Otherwise, it will immediately return a <code>Future</code> object which you can call <code>result()</code> on it to get system call's return value.</li>
</ul>
</li>
<li><code>client.call(function, args=(), kwargs={}, block=True)</code>: Let remote computer call a local function.<ul>
<li><code>function</code>: A local callable python object, for example <code>print</code> is OK.</li>
<li><code>args</code>: Function's positional arguments need to be passed.</li>
<li><code>kwargs</code>: Function's key words arguments need to be passed.</li>
<li><code>block</code>: If <code>block</code> is <code>True</code>, it will block process until remote computer call this function finished and return this function calling return value. Otherwise, it will immediately return a <code>Future</code> object which you can call <code>result()</code> on it to get function calling return value.</li>
</ul>
</li>
<li><code>client.call_remote(function_name, args=(), kwargs={}, block=True)</code>: Let remote computer call a remote function.<ul>
<li><code>function_name</code>: A remote function name string, for example <code>"print"</code> is OK.</li>
<li><code>args</code>: Function's positional arguments need to be passed.</li>
<li><code>kwargs</code>: Function's key words arguments need to be passed.</li>
<li><code>block</code>: If <code>block</code> is <code>True</code>, it will block process until remote computer call this function finished and return this function calling return value. Otherwise, it will immediately return a <code>Future</code> object which you can call <code>result()</code> on it to get function calling return value.</li>
</ul>
</li>
</ul>
<h2 id="section-0-6" class="h-title" >0.6&nbsp;&nbsp&nbsp;Examples</h2>
<h3 id="section-0-6-1" class="h-title" >0.6.1&nbsp;&nbsp&nbsp;Chat room</h3>
<p>Run following code on server computer:
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="kn">from</span> <span class="nn">Connector</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">on_connect</span><span class="p">(</span><span class="n">client</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">client</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="s2">&quot;is in.&quot;</span><span class="p">)</span>
    <span class="k">while</span> <span class="ow">not</span> <span class="n">client</span><span class="o">.</span><span class="n">is_closed</span><span class="p">:</span>
        <span class="n">content</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">address</span> <span class="ow">in</span> <span class="n">client</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">address</span> <span class="o">!=</span> <span class="n">client</span><span class="o">.</span><span class="n">address</span><span class="p">:</span>
                    <span class="n">client</span><span class="o">.</span><span class="n">server</span><span class="o">.</span><span class="n">clients</span><span class="p">[</span><span class="n">address</span><span class="p">]</span><span class="o">.</span><span class="n">send</span><span class="p">({</span><span class="s2">&quot;address&quot;</span><span class="p">:</span> <span class="n">client</span><span class="o">.</span><span class="n">address</span><span class="p">,</span> <span class="s2">&quot;content&quot;</span><span class="p">:</span> <span class="n">content</span><span class="p">})</span>
            <span class="k">except</span><span class="p">:</span>
                <span class="k">pass</span>

<span class="k">def</span> <span class="nf">on_disconnect</span><span class="p">(</span><span class="n">address</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="s2">&quot;is out.&quot;</span><span class="p">)</span>

<span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">&quot;192.168.199.210&quot;</span><span class="p">,</span> <span class="mi">1900</span><span class="p">)</span> <span class="c1"># Please input your server computer&#39;s real ip</span>
<span class="n">server</span><span class="o">.</span><span class="n">set_connect_callback</span><span class="p">(</span><span class="n">on_connect</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">set_disconnect_callback</span><span class="p">(</span><span class="n">on_disconnect</span><span class="p">)</span>
<span class="n">server</span><span class="o">.</span><span class="n">hold_on</span><span class="p">()</span>
</code></pre></div></p>
<p>Run following client code on client computer:
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="kn">from</span> <span class="nn">Connector</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">inputer</span> <span class="kn">import</span> <span class="o">*</span> <span class="c1"># you need call &#39;pip install inputer&#39;</span>
<span class="kn">import</span> <span class="nn">threading</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;192.168.199.210&quot;</span><span class="p">,</span> <span class="mi">1900</span><span class="p">)</span> <span class="c1"># Please input server computer&#39;s real ip</span>
<span class="n">inputer</span> <span class="o">=</span> <span class="n">Inputer</span><span class="p">()</span>

<span class="k">def</span> <span class="nf">recving</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">inputer</span><span class="p">):</span>
    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">message</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="n">inputer</span><span class="o">.</span><span class="n">print_before</span><span class="p">(</span><span class="n">message</span><span class="p">[</span><span class="s2">&quot;address&quot;</span><span class="p">],</span> <span class="s2">&quot;: &quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">[</span><span class="s2">&quot;content&quot;</span><span class="p">],</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span>

<span class="n">recving_thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">recving</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">client</span><span class="p">,</span> <span class="n">inputer</span><span class="p">),</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">recving_thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="n">content</span> <span class="o">=</span> <span class="n">inputer</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="s2">&quot;Myself: &quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">content</span> <span class="o">==</span> <span class="s2">&quot;exit&quot;</span><span class="p">:</span>
        <span class="k">break</span>
    <span class="n">client</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>

<span class="n">client</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div></p>
<h3 id="section-0-6-2" class="h-title" >0.6.2&nbsp;&nbsp&nbsp;Time consuming integral</h3>
<p>If you want to get the integral value of a function on an inteval, in a simple way, you can use following code:
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">math</span>
<span class="k">def</span> <span class="nf">integral</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">inteval</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">L</span> <span class="o">/</span> <span class="n">n</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="o">*</span><span class="n">L</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">func</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">integral</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">]))</span>
</code></pre></div></p>
<p>But in above code, <code>f</code> is a simple function. But if <code>f</code> is a very time consuming function, the time consuming will be multiplied by 1000 for total integral time. We can do it in distributed computing way:
<div class="highlight"><pre><span></span><code><span class="c1"># server side</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">Connector</span> <span class="kn">import</span> <span class="o">*</span>

<span class="k">def</span> <span class="nf">integral</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">inteval</span><span class="p">):</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">1000</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">-</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">dx</span> <span class="o">=</span> <span class="n">L</span> <span class="o">/</span> <span class="n">n</span>

    <span class="n">server</span> <span class="o">=</span> <span class="n">Server</span><span class="p">(</span><span class="s2">&quot;192.168.199.210&quot;</span><span class="p">,</span> <span class="mi">1900</span><span class="p">)</span>
    <span class="n">server</span><span class="p">[</span><span class="s2">&quot;func&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">func</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">inteval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span><span class="o">/</span><span class="n">n</span><span class="o">*</span><span class="n">L</span>
        <span class="n">server</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;task&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

    <span class="k">while</span> <span class="n">n</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">result</span> <span class="o">+=</span> <span class="n">dx</span> <span class="o">*</span> <span class="n">server</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">n</span> <span class="o">-=</span> <span class="mi">1</span>

    <span class="n">server</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">f</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">integral</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">]))</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><span class="c1"># client side</span>
<span class="kn">from</span> <span class="nn">Connector</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">()</span>
<span class="n">client</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;192.168.199.210&quot;</span><span class="p">,</span> <span class="mi">1900</span><span class="p">)</span>

<span class="n">f</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="p">[</span><span class="s2">&quot;func&quot;</span><span class="p">]</span>
<span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;task&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">f</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
        <span class="n">client</span><span class="o">.</span><span class="n">globals</span><span class="o">.</span><span class="n">queues</span><span class="p">[</span><span class="s2">&quot;result&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">break</span>
</code></pre></div>
    <!-- main content -->
</article>
</div>
</div>
</div>
</body>
</html>